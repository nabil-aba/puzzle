<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Puzzle Hub | Nabil</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;800&family=Space+Grotesk:wght@500;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --bg-color: #f0fdfa;
        --accent: #ff005c;
        --yellow: #fbbf24;
        --cyan: #06b6d4;
        --black: #18181b;
        --border: 3px;
        --shadow: 5px;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      ::-webkit-scrollbar {
        width: 18px;
      }
      ::-webkit-scrollbar-track {
        background: var(--bg-color);
        border-left: var(--border) solid var(--black);
      }
      ::-webkit-scrollbar-thumb {
        background: var(--cyan);
        border: var(--border) solid var(--black);
      }
      ::-webkit-scrollbar-thumb:hover {
        background: var(--accent);
      }
      html {
        scrollbar-width: auto;
        scrollbar-color: var(--cyan) var(--bg-color);
      }
      body {
        font-family: "Outfit", sans-serif;
        background-color: var(--bg-color);
        color: var(--black);
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
        cursor: crosshair;
      }
      .chaos-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -5;
        overflow: hidden;
        pointer-events: none;
      }
      .base-grid {
        position: absolute;
        width: 100%;
        height: 100%;
        background-image: linear-gradient(
            rgba(0, 0, 0, 0.15) 1px,
            transparent 1px
          ),
          linear-gradient(to right, rgba(0, 0, 0, 0.15) 1px, transparent 1px);
        background-size: 40px 40px;
      }
      .floater {
        position: absolute;
        user-select: none;
        animation-name: floatAround;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
        animation-direction: alternate;
      }
      @keyframes floatAround {
        0% {
          transform: translate(0, 0) rotate(0deg);
        }
        100% {
          transform: translate(20px, -30px) rotate(15deg);
        }
      }
      .sparkle {
        position: absolute;
        color: var(--yellow);
        animation: twinkle 2s infinite ease-in-out;
      }
      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.3;
          transform: scale(0.5);
        }
        50% {
          opacity: 1;
          transform: scale(1.2);
          filter: drop-shadow(0 0 5px gold);
        }
      }
      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 4rem 1.5rem;
        position: relative;
        z-index: 10;
      }
      header {
        text-align: center;
        margin-bottom: 4rem;
        position: relative;
      }
      .logo-wrapper {
        display: inline-block;
        animation: beat 3s infinite;
      }
      @keyframes beat {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }
      .main-logo-svg {
        width: 100px;
        height: 100px;
        filter: drop-shadow(5px 5px 0px var(--black));
      }
      h1 {
        font-family: "Space Grotesk", sans-serif;
        font-size: clamp(3.5rem, 8vw, 6rem);
        line-height: 1;
        font-weight: 800;
        color: white;
        -webkit-text-stroke: 3px var(--black);
        text-transform: uppercase;
        margin: 1rem 0;
        position: relative;
        display: inline-block;
        text-shadow: 4px 4px 0px var(--accent), 8px 8px 0px var(--cyan),
          12px 12px 0px var(--black);
      }
      .tagline {
        background: var(--black);
        color: var(--yellow);
        padding: 0.5rem 1.5rem;
        font-family: "Space Grotesk", sans-serif;
        font-weight: 700;
        font-size: 1.2rem;
        transform: rotate(-3deg);
        display: inline-block;
        border: 2px solid white;
        box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.2);
      }
      #puzzle-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 3rem;
      }
      .card {
        background: white;
        border: var(--border) solid var(--black);
        border-radius: 12px;
        text-decoration: none;
        color: var(--black);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        position: relative;
        box-shadow: 8px 8px 0px var(--black);
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }
      .card:hover {
        transform: translate(-5px, -5px) rotate(1deg);
        box-shadow: 12px 12px 0px var(--accent);
        z-index: 5;
      }
      .card-header {
        background: var(--black);
        color: white;
        padding: 0.8rem 1rem;
        font-weight: 700;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: var(--border) solid var(--black);
      }
      .lvl-badge {
        background: var(--accent);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        border: 1px solid white;
      }
      .card-body {
        padding: 2rem 1rem;
        text-align: center;
        flex-grow: 1;
        background-color: white;
        background-image: repeating-conic-gradient(
          from 180deg at 50% 120%,
          #f3f4f6 0deg 7.5deg,
          white 7.5deg 15deg
        );
      }
      .emoji-wrapper {
        font-size: 4.5rem;
        margin-bottom: 1rem;
        transition: 0.3s;
        filter: drop-shadow(3px 3px 0px rgba(0, 0, 0, 0.2));
      }
      .card:hover .emoji-wrapper {
        transform: scale(1.2) rotate(-10deg);
        filter: drop-shadow(5px 5px 0px rgba(0, 0, 0, 0.3));
      }
      .card-title {
        font-family: "Space Grotesk", sans-serif;
        font-weight: 800;
        font-size: 1.6rem;
        line-height: 1.1;
        margin-bottom: 5px;
      }
      .card-footer {
        padding: 1rem;
        background: white;
        border-top: var(--border) solid var(--black);
      }
      .play-btn {
        background: var(--yellow);
        color: var(--black);
        display: block;
        padding: 0.8rem;
        text-align: center;
        font-weight: 800;
        font-family: "Space Grotesk";
        border: 2px solid var(--black);
        box-shadow: 3px 3px 0px var(--black);
        transition: 0.2s;
        text-transform: uppercase;
        letter-spacing: 1px;
      }
      .card:hover .play-btn {
        background: var(--cyan);
        color: white;
        box-shadow: 5px 5px 0px var(--black);
        transform: translateY(-2px);
      }
      .loader-container {
        display: flex;
        justify-content: center;
        margin-top: 50px;
      }
      .spinner {
        width: 50px;
        height: 50px;
        border: 5px solid var(--black);
        border-top-color: var(--accent);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      @keyframes popIn {
        from {
          opacity: 0;
          transform: scale(0.5) rotate(-5deg);
        }
        to {
          opacity: 1;
          transform: scale(1) rotate(0deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="chaos-container" id="chaos-bg">
      <div class="base-grid"></div>
    </div>

    <div class="container">
      <header>
        <div class="logo-wrapper">
          <svg
            class="main-logo-svg"
            viewBox="0 0 100 100"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M20,20 H40 A10,10 0 0,0 60,20 H80 V40 A10,10 0 0,1 80,60 V80 H60 A10,10 0 0,1 40,80 H20 V60 A10,10 0 0,0 20,40 V20 Z"
              fill="#fbbf24"
              stroke="#18181b"
              stroke-width="4"
            />
            <circle cx="35" cy="35" r="5" fill="white" />
            <path
              d="M70,30 L60,40 M60,30 L70,40"
              stroke="white"
              stroke-width="3"
              stroke-linecap="round"
            />
          </svg>
        </div>
        <br />
        <h1>PUZZLE HUB</h1>
        <br />
        <div class="tagline">üî• Nabil's Creative Arcade üî•</div>
      </header>

      <div id="loader" class="loader-container">
        <div class="spinner"></div>
      </div>
      <div id="puzzle-grid"></div>
    </div>

    <script>
      const USER = "nabil-aba";
      const REPO = "puzzle";
      const BG_ITEMS = [
        "‚ú®",
        "üß©",
        "üé≤",
        "‚ö°",
        "‚≠ê",
        "üéÆ",
        "üëæ",
        "üåÄ",
        "üí†",
        "üéà",
      ];
      const CARD_EMOJIS = [
        "üß©",
        "üé≤",
        "üéØ",
        "üéÆ",
        "üïπÔ∏è",
        "üëæ",
        "üß†",
        "üî•",
        "üíé",
        "‚ö°",
        "üöÄ",
        "üóø",
      ];

      function createChaosBackground() {
        const container = document.getElementById("chaos-bg");
        const count = 30;
        for (let i = 0; i < count; i++) {
          const el = document.createElement("div");
          const isSparkle = Math.random() > 0.7;
          if (isSparkle) {
            el.className = "sparkle";
            el.innerHTML = '<i class="fa-solid fa-star"></i>';
            el.style.fontSize = Math.random() * 20 + 10 + "px";
          } else {
            el.className = "floater";
            el.innerText =
              BG_ITEMS[Math.floor(Math.random() * BG_ITEMS.length)];
            el.style.fontSize = Math.random() * 30 + 20 + "px";
            el.style.opacity = Math.random() * 0.4 + 0.1;
          }
          el.style.left = Math.random() * 100 + "vw";
          el.style.top = Math.random() * 100 + "vh";
          el.style.animationDuration = Math.random() * 5 + 3 + "s";
          el.style.animationDelay = Math.random() * 2 + "s";
          container.appendChild(el);
        }
      }

      function formatName(name) {
        return name.replace(/-/g, " ").replace(/\b\w/g, (l) => l.toUpperCase());
      }

      function getRandomItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      async function init() {
        createChaosBackground();
        const svg = document.querySelector(".main-logo-svg");
        const serializer = new XMLSerializer();
        const link = document.createElement("link");
        link.type = "image/svg+xml";
        link.rel = "icon";
        link.href =
          "data:image/svg+xml;base64," +
          btoa(serializer.serializeToString(svg));
        document.head.appendChild(link);
        const grid = document.getElementById("puzzle-grid");
        const loader = document.getElementById("loader");
        const cacheKey = `puzzle_creative_${USER}`;

        try {
          let data = JSON.parse(sessionStorage.getItem(cacheKey));
          if (!data) {
            const res = await fetch(
              `https://api.github.com/repos/${USER}/${REPO}/contents/`
            );
            if (!res.ok) throw new Error("Repo not found");
            data = await res.json();
            sessionStorage.setItem(cacheKey, JSON.stringify(data));
          }
          loader.style.display = "none";
          const folders = data.filter(
            (item) => item.type === "dir" && !item.name.startsWith(".")
          );
          if (folders.length === 0) {
            grid.innerHTML =
              '<div style="grid-column:1/-1;text-align:center;font-weight:bold;font-size:1.5rem;">üöß No Games Yet üöß</div>';
            return;
          }
          folders.forEach((item, i) => {
            const card = document.createElement("a");
            card.href = `./${item.name}/`;
            card.target = "_blank";
            card.className = "card";
            card.style.opacity = "0";
            card.style.animation = `popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards ${
              i * 0.1
            }s`;
            card.innerHTML = `
              <div class="card-header">
                <span>STAGE ${i + 1}</span>
                <span class="lvl-badge">READY</span>
              </div>
              <div class="card-body">
                <div class="emoji-wrapper">${getRandomItem(CARD_EMOJIS)}</div>
                <div class="card-title">${formatName(item.name)}</div>
              </div>
              <div class="card-footer">
                <div class="play-btn">PLAY NOW <i class="fa-solid fa-play" style="font-size:0.8em; margin-left:5px;"></i></div>
              </div>
            `;
            grid.appendChild(card);
          });
        } catch (error) {
          loader.style.display = "none";
          grid.innerHTML = `<div style="text-align:center; font-weight:bold;">Error fetching data. Check connection.</div>`;
        }
      }
      init();
    </script>
  </body>
</html>
